<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="utf-8">
    <title>Työpaja 3</title>
    <link rel="stylesheet" href="css/styles.css">
    <script>
        <!-- JavaScript menee tänne -->
    </script>
</head>

<body class="ws3">
    <h1>Työpaja 3: JavaScript-tapahtumat</h1>
    <hr />
    <p>Tässä harjoituksessa harjoittelemme JavaScript-tapahtumien käyttöä. Käytä luentomateriaalia rinnakkain näiden
        harjoitusten kanssa. On myös hyvä idea tallentaa kirjoittamasi koodirivit myöhempää käyttöä varten.</p>
    <hr />


    <h2 id=otsikko1>Harjoitus 1</h2>
    <p>Alla näet kolme painiketta. Muokkaa lähdekoodia ja lisää näihin painikkeisiin onClick-tapahtumat.</p>
    <p>
        <button id ="button1">Napsauta minua</button>

<!-- TÄSSÄ ON HARJOITUS 1 ENSIMMÄINEN PAINIKE-->
        <script>
            const btn1 = document.getElementById("button1") ;

            btn1.onclick = function() {
                alert("Klikkasit minua!")
            }
        </script>

        <button id ="button2">Näytä taulukko</button>

<!-- TÄSSÄ ON HARJOITUS 1 TOINEN PAINIKE-->
        <script>
            function showTable() {
            const taulukko = `
                <table id="example" class="display" border="1">
                    <thead>
                        <tr>
                            <th>Nimi</th>
                            <th>Tehtävä</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>System Architect</td>
                        </tr>
                        <tr>
                            <td>Garrett Winters</td>
                            <td>Accountant</td>
                        </tr>
                        <tr>
                            <td>Ashton Cox</td>
                            <td>Junior Technical Author</td>
                        </tr>
                        <tr>
                            <td>Cedric Kelly</td>
                            <td>Senior Javascript Developer</td>
                        </tr>
                        <tr>
                            <td>Airi Satou</td>
                            <td>Accountant</td>
                        </tr>
                    </tbody>
                </table>
            `;
            document.querySelector("#taulukonPaikka").innerHTML = taulukko;
        }

        const btn2 = document.getElementById("button2");
        btn2.onclick = showTable;
        </script>

    </p>
    <div id="taulukonPaikka"></div>
    <ol>
        <li>Ensimmäisen painikkeen pitäisi avata alert-ikkuna, joka sanoo "Klikkasit minua!"</li>
        <li>Toinen painike kutsuu kirjoittamaasi funktiota nimeltä showTable(). `showTable`-funktio tulostaa sivulle
            itse määrittelemäsi HTML-taulukon (alla) sivulle.</li>
        <li>Vinkki: Määrittele taulukko käyttäen backtick merkkejä eli ` -merkkejä.</li>
        <li Vinkki:Etsi taulukolle sopiva paikka käyttäen `document.querySelector() -funktiota`. Käytä innerHTML-kenttää
            sisällön asettamiseen. Sijoita taulukko elementtiin, jonka id on 'taulukonPaikka' </li>
    </ol>
    
    <hr />


    <h2 id="otsikko2">Harjoitus 2</h2>

<!--TÄSSÄ ON HARJOITUS 2-->
    <script>
        document.getElementById("otsikko2").addEventListener("mouseover", mouseOver);
        document.getElementById("otsikko1").addEventListener("click", mouseClick);
        
        function mouseOver() {
            console.log("Stepped over my a mouse!");
        }

        function mouseClick() {
            const otsikko = document.querySelector("#otsikko1");
            otsikko.style.color = "red";
            otsikko.innerHTML = "Bye bye mouse!";
        }
    </script>
    <ul>
        <li>Lisää onMouseOver-tapahtuma otsikkoon "Harjoitus 2". Tapahtuman pitäisi aktivoitua, kun hiiri siirtyy
            otsikon
            päälle. Tulosta konsoliin: "Stepped over my a mouse!"</li>
        <li>Lisää toinen tapahtuma, joka aktivoituu, kun hiirellä klikataa Exercise 1 -otsikon päältä. Vaihda tällä
            kertaa otsikon väri punaiseksi ja sisällöksi teksti: "Bye bye mouse!".
            Lisää kuuntelija dynaamisesti addEventListener()-funktiolla</li>

        Vinkki: etsi elementti käyttäen document.querySelector() -funktiota. Sisältöön pääset käsiksi
        innerHTML-kentän avulla.
    </ul>
    <hr />


    <h2>Harjoitus 3</h2>
    <p>Alla näet yksinkertaisen lomakkeen.</p>
    <ul>
        <li>Lisää onfocus-tapahtuma textarea-alueeseen. Kun käyttäjä siirtyy kenttään, näytetään teksti: "Please fill in
            the form with proper data." Voit myös kokeilla taustavärin muuttamista.</li>
        <li>Lisää onkeydown-tapahtuma `textarea`-elementtiin. Lisää sitten koodi joka laskee näppäinpainallukset ja
            tulostaa ne tekstikenttään jonka id on "charcount". Voisitko keksiä muita fiksuja käyttötapoja
            tämänkaltaiselle kuuntelijalle?</li>
        <li>Kun lomakkeen painiketta klikataan, tarkista onko `textarea`-kenttä tyhjä. Ilmoita käyttäjälle tyhjästä
            kentästä asianmukaisella viestillä haluamallasi tavalla. </li>
        <li> VINKKI: Voit käyttää seuraavaa komentoa
            tekstialueen arvon lukemiseen: <i>document.getElementById("textdata").value</i>. Lomakkeita käsitellään
            tarkemmin työpajoissa 4 ja 5.</li>

        <li> Bonus: Näytä käyttäjälle reaaliaikainen merkkimäärä textarea-kentässä (esim. 0/200).
            Jos käyttäjä ylittää merkkirajan, muuta tekstin väri punaiseksi.</li>

        <li>>Haaste: Lisää "lähetä"-painikkeeseen deaktivointi, kun kenttä on tyhjä tai liian pitkä. Tämä onnistuu
            muuttamalla napin disabled-kenttää JavaScriptin avulla.
        </li>
    </ul>
    <form>

<!-- TÄSSÄ ON HARJOITUS 3 -->
        <textarea id="textdata"></textarea><br>
        <span id="charcount"></span>
        <button id="laheta">Lähetä</button>

        <script>
            const ruutu = document.querySelector("#textdata");
            ruutu.addEventListener("focus", fokus);
            ruutu.addEventListener("keydown", keyDown);

            document.getElementById("laheta").addEventListener("click", onClick);
            // Onfocus -tapahtuman lisäys textarea-alueeseen
            function fokus() {
                if (ruutu.value.trim().length === 0) {
                    ruutu.value = "Please fill in the form with proper data.";
                    ruutu.style.background = "lightblue";
                }
            }
            // Onkeydown-tapahtuman lisäys sekä merkkien laskenta.
            function keyDown(e) {
                let pituus = ruutu.value.length;
                if (e.key.length === 1) {
                    pituus +=1;
                }
                document.getElementById("charcount").innerHTML = "Merkkejä: " + pituus + "/200";

                // Tekstin värimuutos mikäli merkkiraja ylittyy > lähetä-nappi poistetaan käytöstä
                if (pituus > 200) {
                    ruutu.style.color = "red";
                    document.getElementById("laheta").disabled = true;
                } else {
                    ruutu.style.color = "black";
                    document.getElementById("laheta").disabled = false;
                }
            }
            // Lähetä- napin painalluksesta tekstikentän tarkastus: jos tyhjä, pyydetään lisäämään tekstiä, jos liikaa merkkejä, teksti muuttuu punaiseksi.
            function onClick() {
                const pituus = ruutu.value.trim().length;

                if (pituus === 0) {
                    alert("The form is empty. Please fill in the form with proper data. ")
                    document.getElementById("laheta").disabled = true;

                } else if (pituus > 200) {
                    ruutu.style.color = "red";
                    document.getElementById("laheta").disabled = true;

                } else {
                    alert("Form submitted!");
                    document.getElementById("laheta").disabled = false;
                    ruutu.style.color = "black";
                }
            }

        </script>

    </form>
    <hr />


    <h2>Harjoitus 4</h2>
    <div id="coordinates">Lorem ipsum</div>


    <p>Lisää onMouseMove-tapahtuma yllä olevaan DIV-elementtiin. Kun liikutat
        hiirtä DIVin (suorakulmion) päällä, ohjelman pitäisi tulostaa kohdistimen
        koordinaatit.

        Kokeile ensin tulostamista konsoliin `console.log`-komennolla.

    <p>Kun ohjelma toimii, voit kokeilla tulostaa tekstin elementtiin, jolla on id
        "coords".</p>
    <p>VINKKI: Käytä <code>document.getElementById("coordinates").innerHTML</code> tulostuksen toteuttamiseen.</p>

    <h2> Bonus-tehtävä</h2>

    <p>Tee nappi joka tarkistaa käyttäjän sijainnin käyttäen <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API/Using_the_Geolocation_API">Geolocation
            API:a</a ja tulostaa sijainnin koordinaatit konsoliin <p>
        . Huom: Jotkin selaimet eivät salli tätä vaihtamatta turva-asetuksia. Kokeile eri selaimia, jos saat virheitä.
    <p>Ohjaa lopuksi selain Google Maps -sivulle. Rakenna osoite käyttäen
        lukemiasi koordinaatteja.
    <p>VINKKI: Voit avata Google Mapsin tietyillä koordinaateilla linkillä:
        `https://www.google.com/maps?q=LATITUDE,LONGITUDE`
    <p>Bonus: Miten voisi käsitellä tilanteen, jossa sijainti ei
        ole saatavilla?
</body>

</html>